<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SRN Parts Lookup – FLS→Nemaska (PWA)</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0b0f14" />
  <link rel="icon" sizes="192x192" href="icons/icon-192.png">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <style>
    body{margin:0;font:14px system-ui;background:#0b0f14;color:#e6edf3}
    header{padding:12px 16px;background:#131a21;color:#fff}
    header h1{margin:0;font-size:18px}
    iframe{border:0;width:100%;height:calc(100vh - 56px)}
    @media (max-width:760px){header h1{font-size:16px}}
    #lockOverlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:#0b0f14;z-index:10;padding:20px}
    #lockBox{background:#131a21;border:1px solid #233142;border-radius:12px;padding:28px;max-width:340px;width:100%;box-shadow:0 4px 18px -4px rgba(0,0,0,.6)}
    #lockBox h2{margin:0 0 14px;font-size:20px;color:#4ea1ff}
    #lockBox p{margin:0 0 18px;font-size:13px;line-height:1.4;color:#9fb0c0}
    #lockBox input{width:100%;padding:12px 14px;border-radius:8px;border:1px solid #233142;background:#0f141a;color:#e6edf3;font-size:14px;box-sizing:border-box}
    #lockBox button{margin-top:14px;width:100%;padding:12px 14px;border-radius:8px;border:1px solid #2b6fb3;background:#4ea1ff;color:#061018;font-weight:600;cursor:pointer;font-size:14px}
    #lockMsg{margin-top:10px;font-size:12px;color:#e06262;min-height:16px}
  </style>
</head>
<body>
  <header><h1>SRN Parts Lookup – Full Database</h1></header>
  <div id="appMount"></div>
  <div id="lockOverlay" hidden>
    <div id="lockBox">
      <h2>Access Required</h2>
      <p>Enter the access code to open the SRN Parts Database.</p>
      <input id="lockInput" type="password" placeholder="Access code" autocomplete="off" inputmode="numeric" />
      <button id="lockBtn">Unlock</button>
      <div id="lockMsg"></div>
    </div>
  </div>
  <script>
    (function(){
      const PASS='1077';
      const mount=document.getElementById('appMount');
      const overlay=document.getElementById('lockOverlay');
      const inp=document.getElementById('lockInput');
      const btn=document.getElementById('lockBtn');
      const msg=document.getElementById('lockMsg');
      function loadApp(){
        if(!mount.querySelector('iframe')){
          const fr=document.createElement('iframe');
          fr.title='SRN Parts Database';
          fr.src='SRN_Parts_Database_Improved.html';
          mount.appendChild(fr);
        }
      }
      function unlockFlow(){
        overlay.hidden=true;loadApp();
        sessionStorage.setItem('srnAuth','1');
      }
      if(sessionStorage.getItem('srnAuth')==='1'){
        loadApp();
      } else {
        overlay.hidden=false;
        setTimeout(()=>inp.focus(),50);
      }
      function attempt(){
        if(inp.value.trim()===PASS){unlockFlow();}
        else {msg.textContent='Incorrect code';inp.select();}
      }
      btn.addEventListener('click',attempt);
      inp.addEventListener('keypress',e=>{if(e.key==='Enter')attempt();});
      if('serviceWorker' in navigator){
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('./service-worker.js', {scope: './'}).catch(console.error);
        });
      }
    })();
  </script>
  <noscript>Enable JavaScript to use the SRN Parts database.</noscript>
</body>
</html>
